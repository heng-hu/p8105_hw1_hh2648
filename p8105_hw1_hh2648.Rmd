---
title: "P8105 Data Science I - Homework 1"
author: "Heng Hu (hh2648)"
date: 2025-09-14
output: github_document
---


Load packages

```{r message = FALSE}
library(tidyverse)
library(moderndive)
```


## Problem 1

```{r}
# Load the dataset
data("early_january_weather")

# Explorer the dataset
var_nms <- names(early_january_weather)
origin <- unique(early_january_weather$origin)
yr <- unique(early_january_weather$year)
day_min <- min(early_january_weather$day)
day_max <- max(early_january_weather$day)

# Check whether the time interval between all consecutive records is one hour
not_1hr_obs <- early_january_weather |> 
  mutate(diff_hr = as.numeric(difftime(time_hour, lag(time_hour), units = "hours"))) |> 
  filter(row_number() != 1 & (is.na(diff_hr) | diff_hr != 1))
```

#### a. Description of the dataset:
This dataset has ``r ncol(early_january_weather)`` variables and ``r nrow(early_january_weather)`` observations. The variables' names are ``r var_nms``.The `origin` variable indicates the data was collected from ``r origin``, which is Newark Liberty International Airport. According to `year`, `month`, and `day` variables, we know that the observations were collected from `Jan `r day_min`, `r yr`` to `Jan `r day_max`, `r yr``. At first glance at the values of `hour`, the records appear to be collected 
hourly. However, after calculating the time intervals between all consecutive records, ``r nrow(not_1hr_obs)`` record was found not to have been collected one hour after the previous entry.

`visib` is the visibility in miles. It is a critical parameter for airport operations. The mean visibility in this dataset is ``r sprintf("%.1f", mean(early_january_weather$visib))`` miles, with a standard deviation of ``r sprintf("%.1f", sd(early_january_weather$visib))`` miles.

`wind_speed` is the speed of wind in miles per hour (mph). It is another critical parameter for airport operations. The mean wind speed in this dataset is ``r sprintf("%.1f", mean(early_january_weather$wind_speed))`` mph, with a standard deviation of ``r sprintf("%.1f", sd(early_january_weather$wind_speed))`` mph.

In winter, temperature is also important for the airport. The mean temperature in early Januray, `r yr` is ``r sprintf("%.1f", sd(early_january_weather$temp))`` °F.

#### b. Make a scatter plot of temp (y) vs time_hour (x):
```{r message = FALSE}
# Set up breaks for X axis
min_time_hr <- min(early_january_weather$time_hour)
max_time_hr <- max(early_january_weather$time_hour)
x_breaks <- seq(min_time_hr - 24*60*60, max_time_hr, by = "5 days")
x_breaks[1] <- min_time_hr

# Make scatter plot
p <- early_january_weather |> 
  ggplot(aes(x = time_hour, y = temp, color = humid)) +
  geom_point() +
  theme_minimal() +
  labs(title = "EWR Temperature — Early January 2013",
       y = "Temperature (\u00B0F)",
       col = "Relative\nhumidity (%)") +
  scale_x_datetime(breaks = x_breaks,
                   labels = function(x) format(x, "%b-%d")) +
  theme_minimal() +
  theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), 
        axis.ticks = element_line(),
        axis.line.y = element_line(color = "black"),
        axis.title.y = element_text(size = 12),
        axis.line.x = element_line(color = "black"),
        axis.title.x = element_blank(),
        axis.text.x = element_text(size = 12),
        legend.title = element_text(margin = margin(0,0,10,0))
  )

# Save the plot
ggsave("EWR_early_jan_temp.png", p, width = 8, height = 6, dpi = 600, bg = "white")
p
```


## Problem 2

```{r}
# Set a seed to ensure consistent results
set.seed(2648)

# Create a dataset with numeric, logic, character, and factor variables
dt <- tibble(
  vec_num = rnorm(10),
  vec_log = vec_num > 0,
  vec_char = ifelse(vec_num > 0, "Positive", "Not positive"),
  vec_fact = factor(case_when(
    vec_num > quantile(vec_num, 0.75) ~ "High",
    vec_num < quantile(vec_num, 0.25) ~ "Low",
    .default = "Normal"
  ),
  levels = c("Low", "Normal", "High"),
  ordered = TRUE)
)

dt
```

We can use `mean()` to calculate numeric and logic variables. The mean of numeric variable `vec_num` is ``r mean(dt$vec_num)``, and the mean of logic variable `vec_log` is ``r mean(dt$vec_log)``. When you try to calculate the mean of character and factor variables, a warning message will be displayed and `mean()` will return ``r mean(dt$vec_char)``.

```{r eval = FALSE}
# Convert logic, character, and factor variables to numeric
log2num <- as.numeric(dt$vec_log)
char2num <- as.numeric(dt$vec_char)
fact2num <- as.numeric(dt$vec_fact)
```

Logic variables can be converted to numeric variables smoothly. That's why we can apply `mean()` directly to logic variables. 

Typically, character variables are not convertible to numeric types. As a result, all elements will be coerced to `NA`, except those that are valid numeric representations. For example, `c("1", "a")` will be converted to ``r paste0("c(", paste(as.numeric(c("1", "a")), collapse = ", "), ")")``.

Factor variables can be converted to numeric because their underlying values are stored as integers. However, `mean()` cannot be applied to factor variables directly, since those integers represent categorical levels rather than actual numeric values.
